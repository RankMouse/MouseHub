local OrionLib = loadstring(game:HttpGet(('https://raw.githubusercontent.com/shlexware/Orion/main/source')))()
local Window = OrionLib:MakeWindow({Name = "MouseHub", HidePremium = true, SaveConfig = false, ConfigFolder = "MouseHub", IntroText = "MouseHub"})


local MainTab = Window:MakeTab({Name = "Main", Icon = "rbxassetid://0", PremiumOnly = false})
local MiscTab = Window:MakeTab({Name = "Misc", Icon = "rbxassetid://0", PremiumOnly = false})


local MinAttack = 0
local MinArmor = 0
local AutoBankToggle = false
local UserID = tostring(game.Players.LocalPlayer.UserId)
local stages = game:GetService("Workspace").Homes[UserID].Util.Factory.SellArea.Stages


local AutoBank = MainTab:AddSection({Name = "AutoBank"})

AutoBank:AddTextbox({Name = "Minimum Attack Requirement", Default = "", TextDisappear = false, Callback = function(Value)
    MinAttack = tonumber(Value)
end})

AutoBank:AddTextbox({Name = "Minimum Armour Requirement", Default = "", TextDisappear = false, Callback = function(Value)
    MinArmor = tonumber(Value)
end})

AutoBank:AddParagraph("Information","The Noob only needs to meet one of the requirements to be banked.")

AutoBank:AddToggle({Name = "On/Off!", Default = false, Callback = function(Value)
    AutoBankToggle = Value
end})


local ReviveNoobs = MainTab:AddSection({Name = "ReviveNoobs"})

ReviveNoobs:AddButton({Name = "Revive!", Callback = function() 
    for i = 1, 3 do
        local args = {
            [1] = 1
        }
        workspace:WaitForChild("Homes"):WaitForChild(UserID):WaitForChild("Util"):WaitForChild("MedBay"):WaitForChild("Stages"):WaitForChild(tostring(i)):WaitForChild("Events"):WaitForChild("PlaceNoob"):InvokeServer(unpack(args))
    end
    
    wait(60)
    
    for i = 1, 3 do
        workspace:WaitForChild("Homes"):WaitForChild(UserID):WaitForChild("Util"):WaitForChild("MedBay"):WaitForChild("Stages"):WaitForChild(tostring(i)):WaitForChild("Events"):WaitForChild("EquipNoob"):InvokeServer()
    end
end})

ReviveNoobs:AddParagraph("Information","Don't press the button again while your Noobs are reviving. You will have to wait about a minute for them to revive and come back to you.")


MiscTab:AddLabel("Coming Soon...")


spawn(function()
    while wait(5) do
        if AutoBankToggle then
            for i = 1, 10 do
                local stage = stages[tostring(i)]
                local success, value = pcall(function()
                    return stage.NoobCase
                end)
                if success and value then
                    local attackLabelText = stage.NoobCase:WaitForChild("LabelGui"):WaitForChild("Stats"):WaitForChild("AttackLabel").TextLabel.Text
                    local armorLabelText = stage.NoobCase:WaitForChild("LabelGui"):WaitForChild("Stats"):WaitForChild("ArmorLabel").TextLabel.Text
                    if (tonumber(attackLabelText) and tonumber(attackLabelText) >= MinAttack) or
                        (tonumber(armorLabelText) and tonumber(armorLabelText) >= MinArmor) then
                        workspace.Homes[UserID].Util.Factory.SellArea.Stages[tostring(i)].Events.SendNoobToBank:InvokeServer()
                    end
                end
            end
        end
    end
end)


-- Revive Function
local function ReviveAndEquipNoobs(UserID)
    for i = 1, 3 do
        local args = {[1] = 1}
        workspace:WaitForChild("Homes"):WaitForChild(UserID):WaitForChild("Util"):WaitForChild("MedBay"):WaitForChild("Stages"):WaitForChild(tostring(i)):WaitForChild("Events"):WaitForChild("PlaceNoob"):InvokeServer(unpack(args))
    end
    wait(60)
    for i = 1, 3 do
        workspace:WaitForChild("Homes"):WaitForChild(UserID):WaitForChild("Util"):WaitForChild("MedBay"):WaitForChild("Stages"):WaitForChild(tostring(i)):WaitForChild("Events"):WaitForChild("EquipNoob"):InvokeServer()
    end
end



OrionLib:Init()
